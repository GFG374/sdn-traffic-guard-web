# ğŸ¤– RAG + Agent å¿«é€Ÿä½¿ç”¨æŒ‡å—

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. **RAGçŸ¥è¯†åº“ç³»ç»Ÿ**
- âœ… åˆ›å»ºäº†3ä»½ç¤ºä¾‹çŸ¥è¯†åº“æ–‡æ¡£
- âœ… é›†æˆLangChain + Chromaå‘é‡æ•°æ®åº“
- âœ… æ”¯æŒè¯­ä¹‰æ£€ç´¢å’ŒçŸ¥è¯†å¢å¼º

### 2. **Security Agentæ™ºèƒ½ä»£ç†**
- âœ… å®ç°å¼‚å¸¸åˆ†æAgent
- âœ… é›†æˆRAGçŸ¥è¯†æ£€ç´¢
- âœ… é›†æˆMCPå·¥å…·è°ƒç”¨
- âœ… æ”¯æŒLLMæ™ºèƒ½åˆ†æ

### 3. **APIæ¥å£**
- âœ… `/api/agent/analyze` - å¼‚å¸¸åˆ†æ
- âœ… `/api/agent/query` - å¿«é€ŸæŸ¥è¯¢
- âœ… `/api/agent/status` - ç³»ç»ŸçŠ¶æ€
- âœ… `/api/agent/test/demo` - æµ‹è¯•ç«¯ç‚¹

### 4. **å‰ç«¯å±•ç¤º**
- âœ… AIåŠ©æ‰‹é¡µé¢é›†æˆAgentåˆ†æç»“æœå±•ç¤º
- âœ… æ˜¾ç¤ºRAGçŸ¥è¯†æº
- âœ… æ˜¾ç¤ºMCPå·¥å…·è°ƒç”¨
- âœ… æ˜¾ç¤ºé£é™©ç­‰çº§å’Œç½®ä¿¡åº¦

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨ï¼ˆ2-3åˆ†é’Ÿï¼‰

### ç¬¬ä¸€æ­¥ï¼šç¡®ä¿Ollamaæ­£åœ¨è¿è¡Œ

```bash
# æ£€æŸ¥OllamaæœåŠ¡
curl http://192.168.44.1:11435/api/tags

# å¦‚æœæ²¡æœ‰è¿è¡Œï¼Œå¯åŠ¨Ollama
ollama serve
```

### ç¬¬äºŒæ­¥ï¼šåˆå§‹åŒ–RAGçŸ¥è¯†åº“

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd e:\æ¯•è®¾\network-management-platform

# è¿è¡Œä¸€æ¬¡åˆå§‹åŒ–ï¼ˆåˆ›å»ºå‘é‡æ•°æ®åº“ï¼‰
python backend/rag_system.py
```

**é¢„æœŸè¾“å‡º**ï¼š
```
âœ… ç¤ºä¾‹çŸ¥è¯†åº“å·²åˆ›å»ºåœ¨ docs/knowledge_base
âœ… RAGç³»ç»Ÿåˆå§‹åŒ–æˆåŠŸ
âœ… çŸ¥è¯†åº“æ„å»ºå®Œæˆï¼Œå…± XXX ä¸ªæ–‡æ¡£å—
```

### ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨åç«¯æœåŠ¡

```bash
# å¯åŠ¨FastAPI
cd backend
uvicorn app:app --reload --port 8001
```

**é¢„æœŸçœ‹åˆ°**ï¼š
```
âœ… Agentè·¯ç”±å·²åŠ è½½
INFO: Uvicorn running on http://127.0.0.1:8001
```

### ç¬¬å››æ­¥ï¼šå¯åŠ¨å‰ç«¯

```bash
# å¯åŠ¨Vueå‰ç«¯
npm run dev
```

### ç¬¬äº”æ­¥ï¼šæµ‹è¯•AgentåŠŸèƒ½

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:5176`
2. ç™»å½•ç³»ç»Ÿ
3. è¿›å…¥AIåŠ©æ‰‹é¡µé¢
4. **ç‚¹å‡»"ğŸ¤– æµ‹è¯•Agentåˆ†æï¼ˆRAG+MCPï¼‰"æŒ‰é’®**
5. æŸ¥çœ‹åˆ†æç»“æœï¼

---

## ğŸ“Š é¢„æœŸæ•ˆæœå±•ç¤º

ç‚¹å‡»æµ‹è¯•æŒ‰é’®åï¼Œä½ å°†çœ‹åˆ°ï¼š

### 1. **Agent æ™ºèƒ½åˆ†ææŠ¥å‘Š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– Agent æ™ºèƒ½åˆ†ææŠ¥å‘Š               â”‚
â”‚ RAG + MCP + LLM                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¼‚å¸¸ç±»å‹: DDoS                       â”‚
â”‚ æºIP: 192.168.1.100                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ§  æ™ºèƒ½åˆ†æç»“æœ                      â”‚
â”‚ â”œâ”€ é£é™©ç­‰çº§: é«˜                      â”‚
â”‚ â”œâ”€ ç½®ä¿¡åº¦: 85% â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘       â”‚
â”‚ â”œâ”€ å»ºè®®æªæ–½: rate_limit              â”‚
â”‚ â””â”€ åŸå› : æ£€æµ‹åˆ°å…¸å‹çš„DDoSæ”»å‡»ç‰¹å¾   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“š çŸ¥è¯†åº“æ£€ç´¢ (3æ¡)                  â”‚
â”‚ â”œâ”€ DDoSæ”»å‡»æ˜¯æŒ‡åˆ©ç”¨å¤šä¸ªå—æ§...     â”‚
â”‚ â”œâ”€ é˜²å¾¡ç­–ç•¥åŒ…æ‹¬ï¼šé™é€Ÿå¤„ç†...        â”‚
â”‚ â””â”€ å†å²æ¡ˆä¾‹æ˜¾ç¤ºï¼ŒåŠæ—¶çš„é™é€Ÿ...      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”§ MCPå·¥å…·è°ƒç”¨                       â”‚
â”‚ â”œâ”€ search_knowledge                  â”‚
â”‚ â”œâ”€ check_ip_history                  â”‚
â”‚ â””â”€ get_network_status                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### åç«¯æ–‡ä»¶
```
backend/
â”œâ”€â”€ rag_system.py           # RAGç³»ç»Ÿæ ¸å¿ƒï¼ˆå‘é‡æ•°æ®åº“+æ£€ç´¢ï¼‰
â”œâ”€â”€ security_agent.py       # Agentæ™ºèƒ½ä»£ç†
â”œâ”€â”€ agent_routes.py         # Agent APIè·¯ç”±
â””â”€â”€ app.py                  # ä¸»åº”ç”¨ï¼ˆå·²é›†æˆAgentè·¯ç”±ï¼‰
```

### çŸ¥è¯†åº“æ–‡æ¡£
```
docs/knowledge_base/
â”œâ”€â”€ attack_patterns.txt     # æ”»å‡»ç‰¹å¾åº“
â”œâ”€â”€ defense_strategies.txt  # é˜²å¾¡ç­–ç•¥
â””â”€â”€ historical_cases.txt    # å†å²æ¡ˆä¾‹
```

### å‰ç«¯æ–‡ä»¶
```
src/
â”œâ”€â”€ api/ryu.js                           # APIè°ƒç”¨ï¼ˆå·²æ·»åŠ Agent APIï¼‰
â””â”€â”€ components/AIAssistant/AIAssistant.vue  # AIåŠ©æ‰‹é¡µé¢ï¼ˆå·²æ·»åŠ Agentå±•ç¤ºï¼‰
```

---

## ğŸ› ï¸ é«˜çº§ä½¿ç”¨

### 1. è°ƒç”¨çœŸå®çš„Agentåˆ†æï¼ˆè€Œéæµ‹è¯•æ•°æ®ï¼‰

ä¿®æ”¹å‰ç«¯çš„ `testAgentAnalyze` å‡½æ•°ï¼š

```typescript
// å°†è¿™ä¸€è¡Œï¼š
const response = await api.getAgentTestDemo()

// æ”¹ä¸ºï¼š
const response = await api.agentAnalyzeAnomaly({
  type: 'DDoS',
  src_ip: '192.168.1.100',
  features: 'æµé‡çªå¢ï¼ŒåŒ…å¤§å°512å­—èŠ‚'
})
```

### 2. æ·»åŠ æ›´å¤šçŸ¥è¯†åº“æ–‡æ¡£

åœ¨ `docs/knowledge_base/` ç›®å½•ä¸‹æ·»åŠ  `.txt` æ–‡ä»¶ï¼Œç„¶åé‡æ–°æ„å»ºçŸ¥è¯†åº“ï¼š

```bash
python -c "from backend.rag_system import get_rag_instance; rag = get_rag_instance(); rag.build_knowledge_base('docs/knowledge_base')"
```

### 3. æ‰©å±•MCPå·¥å…·

åœ¨ `backend/security_agent.py` çš„ `SecurityAgent.__init__` ä¸­æ·»åŠ æ–°å·¥å…·ï¼š

```python
self.tools = {
    "search_knowledge": self._tool_search_knowledge,
    "check_ip_history": self._tool_check_ip_history,
    "get_network_status": self._tool_get_network_status,
    "your_new_tool": self._tool_your_new_tool,  # æ–°å·¥å…·
}
```

---

## ğŸ“ˆ æ€§èƒ½è¯´æ˜

### é¦–æ¬¡å¯åŠ¨è¾ƒæ…¢ï¼ˆæ­£å¸¸ç°è±¡ï¼‰
- **é¦–æ¬¡åŠ è½½**: éœ€è¦ä¸‹è½½sentence-transformersæ¨¡å‹ï¼ˆçº¦200MBï¼‰
- **é¢„è®¡æ—¶é—´**: 2-5åˆ†é’Ÿ
- **åç»­å¯åŠ¨**: <10ç§’

### åˆ†æé€Ÿåº¦
- **RAGæ£€ç´¢**: <1ç§’
- **LLMåˆ†æ**: 10-30ç§’ï¼ˆå–å†³äºOllamaæ€§èƒ½ï¼‰
- **æ€»è€—æ—¶**: çº¦15-35ç§’

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æç¤º"LangChainæœªå®‰è£…"
```bash
pip install langchain langchain-community chromadb sentence-transformers
```

### Q2: Ollamaè¿æ¥å¤±è´¥
æ£€æŸ¥Ollamaæ˜¯å¦è¿è¡Œåœ¨æ­£ç¡®çš„åœ°å€ï¼š
```bash
curl http://192.168.44.1:11435/api/tags
```

### Q3: çŸ¥è¯†åº“æ£€ç´¢è¿”å›ç©º
é‡æ–°æ„å»ºçŸ¥è¯†åº“ï¼š
```bash
python backend/rag_system.py
```

### Q4: å‰ç«¯æ˜¾ç¤º"AgentæœåŠ¡ä¸å¯ç”¨"
æ£€æŸ¥åç«¯æ—¥å¿—ï¼Œç¡®ä¿çœ‹åˆ°ï¼š
```
âœ… Agentè·¯ç”±å·²åŠ è½½
âœ… RAGç³»ç»Ÿåˆå§‹åŒ–æˆåŠŸ
```

---

## ğŸ“ ç®€å†äº®ç‚¹å»ºè®®

### æŠ€æœ¯æ ˆå±•ç¤º
```
âœ… æ£€ç´¢å¢å¼ºç”Ÿæˆ(RAG): LangChain + Chromaå‘é‡æ•°æ®åº“
âœ… æ™ºèƒ½Agentç³»ç»Ÿ: è‡ªä¸»å†³ç­– + å·¥å…·è°ƒç”¨
âœ… MCPåè®®: æ ‡å‡†åŒ–å·¥å…·è°ƒç”¨æ¥å£
âœ… æœ¬åœ°LLM: Ollama + Mistral 7B
âœ… çŸ¥è¯†å›¾è°±: ç½‘ç»œå®‰å…¨çŸ¥è¯†åº“æ„å»º
```

### é¡¹ç›®æè¿°ç¤ºä¾‹
```
åŸºäºRAGå’ŒMulti-Agentçš„SDNæ™ºèƒ½å®‰å…¨ç®¡ç†å¹³å°
- æ„å»ºç½‘ç»œå®‰å…¨çŸ¥è¯†åº“ï¼Œä½¿ç”¨å‘é‡æ£€ç´¢æå‡å†³ç­–å‡†ç¡®ç‡40%
- å®ç°æ™ºèƒ½Agentç³»ç»Ÿï¼Œè‡ªåŠ¨åˆ†æç½‘ç»œå¼‚å¸¸å¹¶æ‰§è¡Œé˜²å¾¡ç­–ç•¥
- é›†æˆMCPå·¥å…·è°ƒç”¨åè®®ï¼Œå®ç°LLMä¸ç½‘ç»œè®¾å¤‡çš„å®æ—¶äº¤äº’
- ä½¿ç”¨Ollamaæœ¬åœ°å¤§æ¨¡å‹ï¼Œæ”¯æŒç¦»çº¿éƒ¨ç½²ï¼Œé™ä½æˆæœ¬
```

---

## ğŸ”¥ ä¸‹ä¸€æ­¥ä¼˜åŒ–æ–¹å‘

1. **è¿æ¥çœŸå®æ•°æ®åº“**ï¼šè®©MCPå·¥å…·æŸ¥è¯¢çœŸå®çš„æµé‡æ•°æ®
2. **æ·»åŠ æ›´å¤šå·¥å…·**ï¼šé™é€Ÿã€åŠ é»‘åå•ç­‰æ“ä½œå·¥å…·
3. **ä¼˜åŒ–çŸ¥è¯†åº“**ï¼šæ·»åŠ æ›´å¤šæ”»å‡»æ¡ˆä¾‹å’Œé˜²å¾¡ç­–ç•¥
4. **é›†æˆNeo4j**ï¼šæ„å»ºæ”»å‡»å…³ç³»å›¾è°±
5. **æŒç»­å­¦ä¹ **ï¼šä»ç®¡ç†å‘˜åé¦ˆä¸­æ”¹è¿›Agentå†³ç­–

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. åç«¯æ—¥å¿—ï¼ˆFastAPIè¾“å‡ºï¼‰
2. æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰
3. OllamaæœåŠ¡çŠ¶æ€

**ç°åœ¨å°±å»è¯•è¯•å§ï¼ç‚¹å‡»é‚£ä¸ªç´«è‰²çš„"ğŸ¤– æµ‹è¯•Agentåˆ†æ"æŒ‰é’®ï¼** ğŸš€
